{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kredit Shartnomasi</title>
<link rel="icon" href="{% static 'img/icon.ico' %}" type="image/x-icon">
</head>
<body>

<div class="paper">
    <div class="board">
        <h1 class="title">KREDIT SHARTNOMASI №{{loan.contract_id}}</h1>

        <p style="text-align:right;">Shartnoma tuzilgan sana: {{loan.start_date|date:"d.m.Y"}}</p>

        <div class="section">
            <h3>1. Tomonlar</h3>
            <p>
                1.1. Kredit beruvchi: {{loan.filial.company.name}}, {{loan.filial.name}} filiali boshqaruvchisi {{loan.filial.manager}}<br>
                1.2. Kredit oluvchi: {{loan.client.full_name}}, JSHSHIR: {{loan.client.passport_pinfl}}, telefon: {{loan.client.numbers.all.0.number}}, manzil: {{loan.client.current_address}}.
            </p>
        </div>

        <div class="section">
            <h3>2. Kredit summasi va muddati</h3>
            <p>
                2.1. Kredit beruvchi kredit oluvchiga <b>{{loan.product.name}}</b> mahsulotini muddatli to‘lov asosida taqdim etadi.<br>
                2.2. Kredit summasi: <b>{{loan.total_amount|intcomma}} so'm</b>.<br>
                2.3. Kredit muddati: <b>{{loan.term}} oy</b>.<br>
                2.4. Foiz stavkasi: <b>{{loan.rate}} %</b>.<br>
                2.5. Oylik to‘lov: <b>{{loan.payment|intcomma}} so'm</b>.
            </p>
        </div>

        <div class="section">
            <h3>3. To‘lov shartlari</h3>
            <p>
                Kredit oluvchi har oy to‘lovlarni **grafikda ko‘rsatilgan tartibda** amalga oshiradi.  
                Oylik to‘lov summasi <b>{{loan.payment|intcomma}} so'm</b> bo‘lib, belgilangan muddatda to‘lanadi.
                Oylik to‘lovning har kechiktirilgan kuni uchun oylik to‘lovni <b>{{loan.fine}}%</b> fozi <b>peniya</b> tarzida qo‘shiladi.
            </p>
        </div>

        <div class="section">
            <h3>4. Tomonlarning majburiyatlari</h3>
            <ul>
                <li>Kredit oluvchi to‘lovlarni belgilangan muddatda amalga oshiradi.</li>
                <li>Kredit beruvchi kredit summasi va foizlarni hisoblab, to‘lov jadvalini taqdim etadi.</li>
                <li>Har ikki tomon shartnoma shartlarini bajoradi va o‘z majburiyatini to‘liq bajaradi.</li>
            </ul>
        </div>

        <div class="section">
            <h3>5. Shartnoma yakunlari</h3>
            <p>
                5.1. Ushbu shartnoma ikki nusxada tuzildi va har bir nusxa tomonlar uchun teng kuchga ega.<br>
                5.2. Tomonlar shartnoma shartlarini o‘qib tushungan holda imzo qo‘yadilar.<br>
                5.3. Shartnoma O‘zbekiston Respublikasi qonunchiligiga muvofiq amalga oshiriladi.
            </p>
        </div>

        <div class="signature">
            <p>Kredit oluvchi: {{loan.client.full_name}} ____________________</p>
            <p>Kredit beruvchi: {{loan.filial.manager}} ____________________</p>
            <p>Sana: {{loan.start_date|date:"d.m.Y"}}</p>
        </div>
    </div>
</div>

<div class="info">
    <h1>F.I.O: {{loan.client.full_name}}</h1>
    <p>Hujjat nomi: Kredit Shartnomasi</p>
    <p>Hujjat turi: Kreditlash</p>
    <button onclick="editable()">O'zgartirish</button>
    <button onclick="window.print()">Chiqarish</button>
</div>

<style>
*{
    box-sizing:border-box;
    margin:0;
    padding:0;
    font-family:'Times New Roman', Times, serif;
}
body{
    background-color: #e0e0e0;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    gap:30px;
    padding:20px;
}
.paper{
    width:210mm;
    min-height:297mm;
    background:white;
    border:1px solid black;
    padding:40px 50px;
    display:flex;
    flex-direction: column;
    font-size:12pt;
    line-height:1.5;
}
.board{
    display:flex;
    flex-direction:column;
    width:100%;
}
.title{
    text-align:center;
    margin:20px 0;
}
.section{
    margin-bottom:20px;
}
.section h3{
    margin-bottom:8px;
    text-decoration:underline;
}
.section ul{
    list-style: disc;
    margin-left:20px;
}
.section ul li{
    margin-bottom:5px;
}
.signature{
    margin-top:60px;
}
.signature p{
    margin-bottom:8px;
}

/* info section o‘ngda */
.info{
    background:white;
    padding:10px 15px;
    border-radius:12px;
    font-family:'Trebuchet MS', sans-serif;
    line-height:1.4;
    font-size:12px;
    display:flex;
    flex-direction:column;
    gap:8px;
    width:200px;
    align-self:flex-start;
}

/* print */
@media print {
    body{
        background:white;
        display:block;
        padding:0;
    }
    .paper{
        border:none;
        width:100%;
        min-height:auto;
        padding:40px;
    }
    .info{
        display: none;
    }
}
</style>

<script>
function editable(){
    document.querySelector(".paper").setAttribute("contenteditable","true");
}
</script>

</body>
</html>
